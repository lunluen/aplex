[tox]
envlist = init
          py{35, 36, 37, py}
          coverage
skip_missing_interpreters = true

[vars]
pkg = aplex

[testenv]
deps = pipenv
commands =
    pipenv install --dev
    pipenv run pytest --cov={[vars]pkg} tests --cov-config=.coveragerc --cov-append

[testenv:init]
basepython = python3.7
deps = coverage
commands = coverage erase

[testenv:coverage]
basepython = python3.7
passenv = CI TRAVIS TRAVIS_* CODECOV_*
deps = codecov
commands =
    coverage report
    codecov